# Amazon Analyst v0.1.0 Release Notes

🎉 **首次发布！** 我们很高兴发布 Amazon Analyst 项目的第一个版本 v0.1.0。这是一个基于 Next.js 构建的亚马逊数据分析工具，专注于库存管理和AI驱动的运营分析。

## 🚀 主要特性

### 📊 库存管理系统
- **完整的库存数据管理** - 支持 ASIN、产品名称、业务员、库存点等多维度数据
- **智能数据导入** - 支持 Excel/CSV 文件批量导入库存数据
- **实时库存状态** - 自动计算库存周转天数和状态（库存不足/周转合格/周转超标）
- **多库存点支持** - 支持英国、欧盟、美国、加拿大、澳大利亚、日本等多个库存点

### 🔍 高级筛选与搜索
- **ASIN 模糊搜索** - 支持部分 ASIN 匹配，500ms 防抖优化
- **多维度筛选** - 按业务员、库存点、库存状态进行筛选
- **动态选项获取** - 业务员和库存点选项自动从数据库获取
- **分页浏览** - 支持大数据量的分页展示

### 🤖 AI 运营决策分析
- **实时流式分析** - 基于 Deepseek AI 的实时分析，显示完整思考过程
- **结构化输出** - 分为思考过程、深度分析、行动建议三个部分
- **进度可视化** - 实时显示分析进度和当前步骤
- **分析历史** - 自动保存分析记录，支持历史查看和管理

### 📈 数据可视化
- **库存状态标签** - 直观的颜色标签显示库存状态
- **销售数据展示** - 显示日均销售额、广告数据等关键指标
- **分析次数统计** - 显示每个产品的历史分析次数
- **趋势分析支持** - 为未来的趋势分析功能奠定基础

### 💾 数据持久化
- **PostgreSQL 数据库** - 使用 Drizzle ORM 进行数据管理
- **分析任务跟踪** - 完整的分析任务生命周期管理
- **评价系统** - 支持对 AI 分析结果进行评分和反馈
- **数据完整性** - 通过唯一约束确保数据一致性

## 🛠️ 技术架构

- **前端框架**: Next.js 15 with App Router
- **UI 组件**: Shadcn UI + Radix UI + Tailwind CSS
- **数据库**: PostgreSQL with Drizzle ORM
- **AI 集成**: Deepseek API
- **类型安全**: TypeScript
- **国际化**: next-intl (支持中文/英文)

## 📋 详细功能说明

### 库存数据表格
- **实时搜索**: ASIN 搜索支持防抖，避免频繁 API 调用
- **智能筛选**: 支持业务员、库存点、库存状态的组合筛选
- **数据排序**: 支持按日期、库存量、销售额等字段排序
- **响应式设计**: 适配不同屏幕尺寸

### AI 分析功能
- **流式显示**: 实时展示 AI 的思考过程和分析结果
- **三阶段分析**:
  - 🧠 思考过程: 显示 AI 的数据理解和初步判断
  - 📊 深度分析: 详细的库存、销售、广告数据分析
  - 💡 行动建议: 具体的运营优化建议
- **错误处理**: 完整的错误处理和用户反馈
- **取消支持**: 支持中途取消分析请求

### 历史分析管理
- **分析记录**: 自动保存所有分析历史
- **详情查看**: 支持查看历史分析的完整内容
- **评价系统**: 1-5星评价 + 文字反馈
- **数据清理**: 支持删除不需要的分析记录

## 🐛 已知问题修复

### 数据库相关
- ✅ 修复了数据库连接函数调用错误 (`db()()` → `db()`)
- ✅ 修复了时间字段转换问题 (支持字符串和 Date 对象)
- ✅ 优化了 SQL 查询性能，正确使用表别名

### UI/UX 改进
- ✅ 修复了流式分析显示重复内容的问题
- ✅ 优化了搜索体验，添加了清除按钮和搜索图标
- ✅ 修复了评价组件重复显示的问题
- ✅ 改进了分析历史的自动刷新机制

### API 优化
- ✅ 实现了请求去重控制，避免重复提交
- ✅ 优化了错误处理和用户反馈
- ✅ 添加了完整的参数验证

## 🔄 数据库架构

### 主要数据表
1. **inventory_records** - 库存记录表
   - 支持多维度索引优化查询性能
   - 唯一约束保证数据一致性
   - 包含库存、销售、广告等完整数据

2. **ai_analysis_tasks** - AI分析任务表
   - 完整的任务生命周期管理
   - 支持任务状态跟踪和性能监控
   - 集成评价系统

### 性能优化
- 多维度复合索引提升查询速度
- 窗口函数实现高效的最新记录查询
- LEFT JOIN 统计分析次数，避免N+1查询问题

## 📖 使用指南

### 开发环境设置
```bash
# 安装依赖
pnpm install

# 配置环境变量
cp .env.example .env.local

# 启动开发服务器
pnpm dev
```

### 数据导入
1. 准备 Excel/CSV 文件，包含必要的列名
2. 使用数据导入功能批量上传
3. 系统自动验证和处理数据

### AI 分析使用
1. 在库存数据表格中点击"数据分析"按钮
2. 等待实时分析完成
3. 查看分析结果并进行评价
4. 历史分析可在分析历史模块查看

## 🎯 未来路线图

### v0.2.0 计划功能
- [ ] 数据可视化图表
- [ ] 批量分析功能
- [ ] 分析报告导出
- [ ] 高级筛选条件
- [ ] 用户权限管理

### v0.3.0 计划功能
- [ ] 实时数据同步
- [ ] 移动端优化
- [ ] API 开放平台
- [ ] 多语言完善

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！请确保：

1. 遵循项目的代码规范
2. 提供详细的功能描述
3. 包含必要的测试用例
4. 更新相关文档

## 📞 技术支持

如果您在使用过程中遇到问题，请：

1. 查看项目 README 和文档
2. 搜索现有的 GitHub Issues
3. 创建新的 Issue 并提供详细信息

## 🙏 致谢

感谢所有为项目提供反馈和建议的用户！

---

**下载链接**: [GitHub Releases](https://github.com/your-username/amazon_analyst/releases/tag/v0.1.0)

**部署指南**: 请参考项目根目录的 `README.md` 文件